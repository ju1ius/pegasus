{% set pos_var = position_varname(expr) %}
{% set subres_var = result_varname(expr[0]) %}
{{ expr_comment(expr) }}
{{ pos_var }} = $this->pos;
{{ render_expr(expr[0]) }}
{{ expr_comment(expr, 'result') }}
if ({{ subres_var }}) {
    $scope['{{ expr.label }}'] = substr($this->text, {{ pos_var }}, $this->pos - {{ pos_var }});
}
{{ result_varname(expr) }} = {{ subres_var }};
